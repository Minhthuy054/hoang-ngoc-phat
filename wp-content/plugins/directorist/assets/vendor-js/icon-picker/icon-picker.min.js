window.IconPicker=function(e){return{id:null,value:"",iconType:"solid",container:null,onSelect:null,icons:null,labels:{changeIconButtonLabel:"Change Icon",changeIconButtonPlaceholder:"Click to select icon",filterByNameInputLabel:"Filter By Name",filterByNameInputPlaceholder:"Search",filterByGroupInputLabel:"Filter By Icon Pack",doneButtonLabel:"Done",iconGroupLabels:{}},init:function(){let t=this;const n=document.querySelector("body"),i=n.getAttribute("data-directorist-icon-picker-count"),c=i?parseInt(i)+1:1;n.setAttribute("data-directorist-icon-picker-count",c),this.id=c,this.container=void 0!==e.container?e.container:this.container,this.labels=void 0!==e.labels?{...this.labels,...e.labels}:this.labels,this.onSelect=void 0!==e.onSelect?e.onSelect:this.onSelect,this.icons=void 0!==e.icons?e.icons:this.icons,this.value="string"==typeof e.value?e.value:this.value,this.container&&(t.renderMarkup(),t.renderIcon(),t.attachEvents())},renderIcon(){if(this.container.closest("body").querySelector("#iconsWrapperElm .icons-group"))return;let e="";for(const t of Object.keys(this.icons)){e+=`<div class="icons-group ${t}">`,e+=`<h4>${this.getIconGroupLabel(t)}</h4>`,e+='<div class="icons-group-icons">';for(const n of this.icons[t].icons){const i=this.getFullIcon(n.key,t,n.types[0]);e+=`\n                        <button class="font-icon-btn cptm-btn ${this.value===i?"cptm-btn-primary":"cptm-btn-secondery"} ${i}" data-group-key="${t}" data-icon-key="${n.key}" data-icon-type="${[n.types]}"></button>\n                    `}e+="</div></div>"}this.container.closest("body").querySelector("#iconsWrapperElm").innerHTML=e},renderMarkup(){let e=this.value?this.value.split(" "):["","icon-name"],t="";if(t+=`\n            <div class="icon-picker-selector icon-picker-id-${this.id}" data-icon-picker-id="${this.id}">\n                <div class="icon-picker-selector__icon">\n                    <span class="directorist-selected-icon ${this.value}"></span>\n                    <input\n                    type="text"\n                    placeholder="${this.labels.changeIconButtonPlaceholder}"\n                    class="cptm-form-control"\n                    value="${this.value}" style="${this.value?"padding-left: 38px":""}"\n                    />\n                </div>\n                <button class="icon-picker-selector__btn">${this.labels.changeIconButtonLabel}</button>\n            </div>\n                `,this.container.innerHTML=t,document.querySelector(".icon-picker"))return;let n=`\n            <div class="icon-picker">\n            <div class="icon-picker__inner">\n                <a href="#" class="icon-picker__close"\n                    ><span class="fas fa-times"></span\n                ></a>\n                <div class="icon-picker__sidebar">\n                    <div class="icon-picker__filter">\n                        <label for="">${this.labels.filterByNameInputLabel}</label>\n                        <input type="text" placeholder="${this.labels.filterByNameInputPlaceholder}" />\n                    </div>\n                    <div class="icon-picker__filter">\n                        <label for="">${this.labels.filterByGroupInputLabel}</label>\n                        <select class="icon-picker__filter_select">\n                            ${this.getIconGroupOptions()}\n                        </select>\n                    </div>\n                    <div class="icon-picker__preview">\n                        <span class="icon-picker__preview-icon ${this.value}"></span>\n                        <span class="icon-picker__preview-info">\n                            <span class="icon-picker__icon-name">${e[1]}</span>\n                        </span>\n                    </div>\n                    <button class="cptm-btn cptm-btn-primary icon-picker__done-btn">${this.labels.doneButtonLabel}</button>\n                </div>\n                <div class="icon-picker__content">\n                <div id="iconsWrapperElm" class="iconsWrapperElm">\n\n                </div>\n            </div>\n        </div>\n            `;this.container.closest("body").insertAdjacentHTML("beforeend",n)},getIconGroupOptions:function(){if(!this.icons)return"";let e="";for(const t in this.icons)e+=`<option value="${t}">${this.getIconGroupLabel(t)}</option>\n`;return e},getIconGroupLabel(e){const t=this.labels.iconGroupLabels&&"object"==typeof this.labels.iconGroupLabels?this.labels.iconGroupLabels:{};return void 0!==t[e]?t[e]:this.icons[e].label},attachEvents(){const e=document.querySelectorAll(".font-icon-btn"),t=this;let n;function i(e,t){const n=document.querySelector(".icon-picker");if(n.classList.contains("icon-picker-visible"))return;const i=e.target.closest(".icon-picker-selector").getAttribute("data-icon-picker-id"),c=t.value?t.value.split(" "):[];n.setAttribute("data-icon-picker-id",i),n.querySelector(".icon-picker__filter input").value="";const o=n.querySelector(".icon-picker__filter_select"),s=c.length?c[0]:"",r=t.findIconGroupByIconType(s);r&&(o.value=r),u(o);const l=c.length?".font-icon-btn."+c.join("."):"",a=""!==l?n.querySelector(l):"";document.querySelectorAll(".font-icon-btn").forEach((e=>e.classList.remove("cptm-btn-primary"))),a&&(a.classList.remove("cptm-btn-secondery"),a.classList.add("cptm-btn-primary"));const p=n.querySelector(".icon-picker__preview");p.querySelector(".icon-picker__preview-icon").setAttribute("class","icon-picker__preview-icon "+t.value),p.querySelector(".icon-picker__icon-name").innerHTML=c.length?c[1]:"",n.classList.add("icon-picker-visible")}function c(){document.querySelector(".icon-picker").classList.remove("icon-picker-visible")}e.forEach((i=>{i.addEventListener("click",(function(c){c.preventDefault();const o=c.target.getAttribute("data-group-key"),s=c.target.getAttribute("data-icon-key"),l=c.target.getAttribute("data-icon-type").split(",");n=t.getFullIcon(s,o,l[0]),e.forEach((e=>{e.classList.contains("cptm-btn-primary")&&e.classList.remove("cptm-btn-primary")})),i.classList.add("cptm-btn-primary");const a=t.container.closest("body");a&&(a.querySelector(".icon-picker__preview-icon").setAttribute("class",`icon-picker__preview-icon ${n}`),a.querySelector(".icon-picker__icon-name").innerHTML=s),r()}))}));const o=document.querySelectorAll(".icon-picker-selector .icon-picker-selector__btn");if(o.length)for(const e of o)e.addEventListener("click",(e=>{e.preventDefault(),i(e,t)}));document.querySelector(".icon-picker__done-btn").addEventListener("click",(e=>{e.preventDefault();const i=e.target.closest(".icon-picker").getAttribute("data-icon-picker-id"),o=document.querySelector(`.icon-picker-selector.icon-picker-id-${i}`);parseInt(i)===t.id&&(t.value=n,"function"==typeof t.onSelect&&t.onSelect(n),o.querySelector("input").style.paddingLeft="38px",o.querySelector("input").value=t.value,o.querySelector(".directorist-selected-icon").setAttribute("class",`directorist-selected-icon ${t.value}`),c())})),document.querySelector(".icon-picker__close").addEventListener("click",c),document.body.addEventListener("click",(e=>{e.target.closest(".icon-picker__inner")||e.target.closest(".icon-picker-selector")||e.target.closest(".icons-group-icons")||c()}));const s=document.querySelector(".icon-picker__filter input");function r(){const e=s.value.toUpperCase();document.querySelectorAll(".font-icon-btn").forEach((t=>{t.getAttribute("data-icon-key").toUpperCase().indexOf(e)>-1?t.style.display="":t.style.display="none"}))}s.addEventListener("keyup",r);let l=document.querySelector(".icon-picker__filter select"),a=document.querySelector(".icons-group.fontAwesome"),p=document.querySelector(".icons-group.lineAwesome");function u(e){"fontAwesome"===e.value?(a.style.display="block",p.style.display="none"):"lineAwesome"===e.value&&(p.style.display="block",a.style.display="none")}l.addEventListener("change",(function(){u(this)})),u(l)},findIconGroupByIconType:function(e){if(!this.icons)return"";for(const t in this.icons)for(const n in this.icons[t].iconTypes)if(e===this.icons[t].iconTypes[n].key)return t;return""},getFullIcon(e,t,n){let i="";return void 0!==this.icons[t].iconTypes[n]&&(i=this.icons[t].iconTypes[n].key),`${i} ${e}`}}};