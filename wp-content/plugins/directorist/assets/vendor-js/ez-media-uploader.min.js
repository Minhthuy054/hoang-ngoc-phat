/**
 * EZ Media Uploader
 * Company: Aazz Tech
 * Develoepr: Syed Galib Ahmed
 * Version: 1.0
 * Initial Release: 24 December, 2019
 * */
!function(){function e(e,t){var i="image/*",n=!0;null!==t&&"object"==typeof t&&(n=t.options.allowMultiple,i=function(e){var t="image/*";if(!Array.isArray(e)||!e.length)return t;return t="",h(e,function(e){t="images"===e?t+"image/*, ":t+"."+e+", "}),t=t.replace(/(,\s?)$/,"")}(t.options.allowedFileFormats));e.innerHTML="";var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("id",t.fileInputID),a.setAttribute("class","ezmu__file-input"),a.setAttribute("accept",i),n&&a.setAttribute("multiple","");var r=document.createElement("label");r.setAttribute("for",t.fileInputID),r.setAttribute("class","ezmu__btn ezmu__input-label"),r.innerHTML=t.options.dictionary.label.selectFiles,e.appendChild(a),e.appendChild(r)}function t(e,t){var i=e,n=t[i];if("maxFileSize"===i&&n)return l(1024*n);if("maxTotalFileSize"===i&&n)return l(1024*n);if("allowedFileFormats"===i&&Array.isArray(n)&&n.length){var a="";return h(n,function(e){a+=e+", "}),a.replace(/(, )$/,"")}return n}function i(e){if(!e)return!1;var t=e[0].querySelectorAll(".ezmu__old-files-meta"),i=[];if(!t.length)return!1;for(var n=0;n<t.length;n++){var a=t[n],r=a.getAttribute("data-url"),l=a.getAttribute("data-attachment-id"),o=a.getAttribute("data-size"),s=a.getAttribute("data-type");if(r&&r.length){var u={};u.url=r,l&&l.length&&(u.attachmentID=l),o&&o.length&&(u.size=parseInt(o)),s&&s.length&&(u.type=s),i.push(u)}}return i}function n(e,t,i){e=void 0===e?"":e,t=void 0===t?"div":t,i=void 0===i?"":i;var n=document.createElement(t);return d(n,e),n.innerHTML=i,n}function a(e,t){t=void 0===t?[]:t;var i=!1;if(!Array.isArray(t))return null;if(!t.length)return null;if("object"!=typeof e)return null;if(!("name"in e&&"type"in e))return null;for(var n=e.name,a=n.lastIndexOf("."),r=n.substring(a+1),l=0;l<t.length;l++){var o=t[l],s=e.type.match(/image\//g);if("images"===o&&s){i=!0;break}if(o===r){i=!0;break}}return i}function r(e,t){for(var i=!0,n=0;n<e.length;n++){if(e[n].name===t.name){i=!1;break}}return i}function l(e){var t,i,n=(e=parseFloat(e))/1024,a=((t=n.toFixed())==(i=n.toFixed(2))?t:i)+" KB",r=n<1024?null:n/1024,l="";r&&(l=((t=r.toFixed())==(i=r.toFixed(2))?t:i)+" MB");return r?l:a}function o(e,t,i){for(var n=0;n<e.length;n++)if(e[n][t]==i)return n;return null}function s(e){var t=!1;if("string"==typeof e){var i=e.match(/[^\d]/)?null:parseInt(e);e=(t=!!(i&&i>0))?i:e}return"number"==typeof e&&(t=!!(e=!(e<1)&&e)),!!t&&e}function u(e){e.preventDefault(),e.stopPropagation()}function d(e,t){"object"==typeof e&&"className"in e&&(-1==e.className.split(" ").indexOf(t)&&(e.className+=" "+t,e.className=e.className.trim()))}function m(e,t){if(e){var i=new RegExp(t,"g");e.className=e.className.replace(i,""),e.className=e.className.trim()}}function p(e,t){if(e){var i=new RegExp(t,"g");return e.className.match(i)}}function h(e,t){for(var i=0;i<e.length;i++)t(e[i],i)}this.EzMediaUploader=function(c){"object"==typeof c&&null!==c&&(this.options=function(e,t){if(!t)return e;if(t&&"object"!=typeof t)return e;var i;for(i in t)e.hasOwnProperty(i)&&("dictionary"===i||(e[i]=t[i]));return e}({containerClass:"directorist-image-upload",oldFiels:null,oldFielsUrl:null,maxFileSize:0,maxTotalFileSize:4096,minFileItems:null,maxFileItems:null,allowedFileFormats:["images"],allowMultiple:!0,featured:!0,allowSorting:!0,showAlerts:!0,showFileSize:!0,showInfo:!0,uploaderType:"files",dictionary:{label:{featured:"Featured",dragNDrop:"Drag & Drop",or:"or",dropHere:"Drop Here",selectFiles:"Select Files",addMore:"Add More",change:"Change"},alert:{maxFileSize:"The maximum limit for a file is __DT__",maxTotalFileSize:"The minimum limit for total file size is  __DT__",minFileItems:"The minimum limit for total file is __DT__",maxFileItems:"The maximum limit for total file is __DT__"},info:{maxFileSize:{text:"The maximum allowed size per file is __DT__",show:!0,featured:!1,pin:!1},maxTotalFileSize:{text:"The maximum total allowed file size is __DT__",show:!0,featured:!1,pin:!1},minFileItems:{text:"The minimum __DT__ files are required",show:!0,featured:!1,pin:!1},maxFileItems:{text:"The maximum __DT__ files are allowed",show:!0,featured:!1,pin:!1},allowedFileFormats:{text:"Allowed file types are __DT__",show:!0,featured:!1,pin:!1}}}},c)),this.debugLog=[],this.isClean=!0,this.oldFiles=[],this.files=[],this.filesMeta=[],this.isDragging=!1,this.draggingCounter=0,this.container=null,this.uploadButtonContainer=null,this.mediaPickerSection=null,this.previewSection=null,this.thumbnailArea=null,this.statusSection=null,this.infoSection=null,this.loadingSection=null,this.init=function(){var e=this.options.containerClass,t=document.getElementsByClassName(e);t&&(this.container=t,this.getMarkupOptions(),this.getMarkupDictionary(),this.loadOldFiels(),this.attachElements(),this.updatePreview(),this.attachEventListener())},this.getMarkupOptions=function(){if(!this.container)return null;var e=this.container,t=this;let i=e[0].hasAttribute("data-uploader")?JSON.parse(e[0].getAttribute("data-uploader")):{type:"jpg, jpeg, png, gif",max_num_of_img:"1",max_total_img_size:0,is_required:"0",max_size_per_img:4096,allow_multiple:"0",show_alerts:"0",show_file_size:"0",featured:"0",allow_sorting:"0",show_info:"0",uploader_type:"avater"};h([{key:"maxFileSize",dataAttr:i.max_size_per_img?i.max_size_per_img.toString():"max_size_per_img",dataType:"int"},{key:"maxTotalFileSize",dataAttr:i.max_total_img_size?i.max_total_img_size.toString():"max_total_img_size",dataType:"int"},{key:"minFileItems",dataAttr:i.is_required?i.is_required.toString():"is_required",dataType:"int"},{key:"maxFileItems",dataAttr:i.max_num_of_img?i.max_num_of_img.toString():"max_num_of_img",dataType:"int"},{key:"allowedFileFormats",dataAttr:i.type?i.type.toString():"type",dataType:"array"},{key:"allowMultiple",dataAttr:i.allow_multiple?i.allow_multiple.toString():"allow_multiple",dataType:"bool"},{key:"showAlerts",dataAttr:i.show_alerts?i.show_alerts.toString():"show_alerts",dataType:"bool"},{key:"showFileSize",dataAttr:i.show_file_size?i.show_file_size.toString():"show_file_size",dataType:"bool"},{key:"featured",dataAttr:i.featured?i.featured.toString():"featured",dataType:"bool"},{key:"allowSorting",dataAttr:i.allow_sorting?i.allow_sorting.toString():"allow_sorting",dataType:"bool"},{key:"showInfo",dataAttr:i.show_info?i.show_info.toString():"show_info",dataType:"bool"},{key:"uploaderType",dataAttr:i.uploader_type?i.uploader_type.toString():"uploader_type",dataType:"string"}],function(e){var i=e.dataAttr,n=!(!i||!i.length);if(n&&"string"===e.dataType&&(t.options[e.key]=i),n&&"int"===e.dataType){var a=parseInt(i);t.options[e.key]=!(a<1)&&a}if(n&&"bool"===e.dataType){a=t.options[e.key];switch(i){case"0":case"false":a=!1;break;case"1":case"true":a=!0}t.options[e.key]=a}if(n&&"array"===e.dataType){a=i.replace(/,+$/,"").replace(/\s/g,"").split(",");t.options[e.key]=a}})},this.getMarkupDictionary=function(){if(!this.container)return null;var e=this.container[0],t=this;h([{key:"featured",class:"ezmu-dictionary-label-featured"},{key:"dragNDrop",class:"ezmu-dictionary-label-drag-n-drop"},{key:"or",class:"ezmu-dictionary-label-or"},{key:"dropHere",class:"ezmu-dictionary-label-drop-here"},{key:"selectFiles",class:"ezmu-dictionary-label-select-files"},{key:"addMore",class:"ezmu-dictionary-label-add-more"},{key:"change",class:"ezmu-dictionary-label-change"}],function(i){var n=e.querySelectorAll("."+i.class);if(n&&n.length){var a=n[0].innerHTML.trim();t.options.dictionary.label[i.key]=a}}),h([{key:"maxFileSize",class:"ezmu-dictionary-alert-max-file-size"},{key:"maxTotalFileSize",class:"ezmu-dictionary-alert-max-total-file-size"},{key:"minFileItems",class:"ezmu-dictionary-alert-min-file-items"},{key:"maxFileItems",class:"ezmu-dictionary-alert-max-file-items"}],function(i){var n=e.querySelectorAll("."+i.class);if(n&&n.length){var a=n[0].innerHTML.trim();t.options.dictionary.alert[i.key]=a}}),h([{key:"maxFileSize",class:"ezmu-dictionary-info-max-file-size"},{key:"maxTotalFileSize",class:"ezmu-dictionary-info-max-total-file-size"},{key:"minFileItems",class:"ezmu-dictionary-info-min-file-items"},{key:"maxFileItems",class:"ezmu-dictionary-info-max-file-items"},{key:"allowedFileFormats",class:"ezmu-dictionary-info-type"}],function(i){var n=e.querySelectorAll("."+i.class);if(n&&n.length){var a=n[0].innerHTML.trim();t.options.dictionary.info[i.key].text=a;var r=n[0].getAttribute("data-show"),l=n[0].getAttribute("data-featured"),o=n[0].getAttribute("data-pin");t.options.dictionary.info[i.key].show="0"!==r&&"false"!==r,t.options.dictionary.info[i.key].featured="1"===l||"true"===l,t.options.dictionary.info[i.key].pin="1"===o||"true"===o}})},this.getTheFiles=function(){if(!this.container)return null;this.isClean=!1;var e=[];return this.filesMeta.length?(h(this.filesMeta,function(t){"file"in t&&e.push(t.file)}),e):e},this.getFilesMeta=function(){if(!this.container)return null;this.isClean=!1;var e=[];return this.filesMeta.length?(h(this.filesMeta,function(t){var i={id:t.id,url:t.url,oldFile:t.oldFile};"attachmentID"in t&&(i.attachmentID=t.attachmentID),"url"in t&&(i.url=t.url),"file"in t&&(i.name=t.name,i.fileSize=t.fileSize,i.fileSizeInText=t.fileSizeInText,i.type=t.type,i.limitExceeded=t.limitExceeded),e.push(i)}),e):e},this.validateFiles=function(){if(!this.container)return null;var e=this,t=this.filesMeta,i=this.options.dictionary.alert,a=[],r=this.options.minFileItems,o=s(r);r=o||r,o&&t.length<r&&a.push({errorKey:"minFileItems",message:i.minFileItems.replace(/(__DT__)/g,r)});var u=this.options.maxFileItems,p=s(u);u=p||u,p&&t.length>u&&a.push({errorKey:"maxFileItems",message:i.maxFileItems.replace(/(__DT__)/g,u)}),h(t,function(t){if("object"==typeof t&&null!==t&&"limitExceeded"in t&&t.limitExceeded){var n=l(1024*e.options.maxFileSize);a.push({errorKey:"maxFileSize",message:i.maxFileSize.replace(/(__DT__)/g,n)})}});var c=this.options.maxTotalFileSize,f=s(c);if(c=f||c,f){var _=1024*c,g=l(1024*c),z=0;h(t,function(e){"object"==typeof e&&null!==e&&"fileSize"in e&&(z+=e.fileSize)}),z>_&&a.push({errorKey:"maxTotalFileSize",message:i.maxTotalFileSize.replace(/(__DT__)/g,g)})}this.options.showAlerts&&!this.isClean&&function(e,t){if(t.innerHTML="",!e.length)return void m(t,"ezmu--show");d(t,"ezmu--show");var i=n("ezmu_alert ezmu_alert_error");i.innerHTML=e[0].message,t.appendChild(i)}(a,this.statusSection);var y=e.container[0].querySelectorAll(".ezmu__info-list-item");return y&&y.length&&h(y,function(e){m(e,"has-error")}),!this.isClean&&this.options.showInfo&&a.length&&h(a,function(t){var i=e.container[0].querySelectorAll(".ezmu__info-list-item."+t.errorKey);i&&i.length&&d(i[0],"has-error")}),!a.length||a},this.hasValidFiles=function(){return this.isClean=!1,!0===this.validateFiles()},this.loadOldFiels=function(){if(!this.container)return null;var e=[];if(this.options.oldFiels&&(e=this.getValidatedPaths(this.options.oldFiels)),i(this.container)&&(e=i(this.container)),e.length){this.isClean=!1;for(var t=0;t<e.length;t++){var n=e[t],a={id:t,url:n.url,oldFile:!0};"attachmentID"in n&&(a.attachmentID=n.attachmentID),"type"in n&&(a.type=n.type),"size"in n&&(a.fileSize=1024*n.size,a.fileSizeInText=l(1024*n.size),this.options.maxFileSize&&n.size>this.options.maxFileSize&&(a.limitExceeded=!0)),this.filesMeta.push(a)}}},this.getValidatedPaths=function(e){if(!this.container)return null;if(!Array.isArray(e))return null;if(!e.length)return null;for(var t=[],i=0;i<e.length;i++){var n=e[i];"object"==typeof n&&("url"in n&&t.push(n))}return t.length?t:null},this.attachElements=function(){if(!this.container)return null;var i=this.container[0];d(i,"ez-media-uploader"),i.innerHTML="",this.fileInputID=function(){var e="ezmu__file-input",t=document.querySelectorAll(".ezmu__file-input");t.length&&(e="ezmu__file-input-"+(t.length+1));return e}();var a,r,l=(a=this,d(r=document.createElement("div"),"ezmu__drop-zone-section"),r.innerHTML="<h2>"+a.options.dictionary.label.dropHere+"</h2>",r),o=function(e){var t=n(e?"ezmu__loading-section ezmu--show":"ezmu__loading-section"),i=n("ezmu__loading-icon","span"),a=n("ezmu__loading-icon-img-bg","span");return i.appendChild(a),t.appendChild(i),t}(),s=function(t){if("avater"===t.options.uploaderType)return function(t){var i=n("ezmu__media-picker-section ezmu--show"),a=n("ezmu__media-picker-controls"),r=n("ezmu__media-picker-icon-wrap-avater","span"),l=n("ezmu__icon ezmu-icon-avater","span");r.appendChild(l),a.appendChild(r);var o=n("ezmu__media-picker-buttons"),s=n("ezmu__upload-button-wrap");return e(s,t),o.appendChild(s),a.appendChild(o),i.appendChild(a),i}(t);return function(t){var i=n("ezmu__media-picker-section ezmu--show"),a=n("ezmu__media-picker-controls"),r=n("ezmu__media-picker-icon-wrap-upload","span"),l=n("ezmu__icon ezmu-icon-upload","span");r.appendChild(l),a.appendChild(r);var o=n("ezmu__media-picker-buttons"),s=n("ezmu__titles-area"),u=n("ezmu__title-1","p",t.options.dictionary.label.dragNDrop),d=n("ezmu__title-3","p",t.options.dictionary.label.or);s.appendChild(u),s.appendChild(d);var m=n("ezmu__upload-button-wrap");return e(m,t),o.appendChild(s),o.appendChild(m),a.appendChild(o),i.appendChild(a),i}(t)}(this),u=function(e){var t=n("ezmu__preview-section"),i=n("ezmu__thumbnail-area"),a=n("ezmu__media-picker-buttons"),r=e.options.dictionary.label.addMore;!e.options.allowMultiple&&e.filesMeta.length&&(r=e.options.dictionary.label.change);var l=n("ezmu__upload-button-wrap"),o=n("ezmu__btn ezmu__input-label ezmu__update-file-btn","label",r);return o.setAttribute("for",e.fileInputID),l.appendChild(o),a.appendChild(l),t.appendChild(i),t.appendChild(a),t}(this);i.appendChild(l),i.appendChild(o),i.appendChild(s),i.appendChild(u);var m=i.querySelectorAll(".ezmu__upload-button-wrap"),p=i.querySelectorAll(".ezmu__media-picker-section"),h=i.querySelectorAll(".ezmu__preview-section"),c=i.querySelectorAll(".ezmu__thumbnail-area"),f=i.querySelectorAll(".ezmu__loading-section");if(this.uploadButtonContainer=m?m[0]:null,this.mediaPickerSection=p?p[0]:null,this.previewSection=h?h[0]:null,this.thumbnailArea=c?c[0]:null,this.loadingSection=f?f[0]:null,this.options.showAlerts){var _=n("ezmu__status-section");i.appendChild(_);var g=i.querySelectorAll(".ezmu__status-section");this.statusSection=g?g[0]:null}if(this.options.showInfo){var z=function(e){var i=n("ezmu__info-section"),a=e.dictionary.info,r=n("ezmu__info-list","ul"),l=0;for(var o in a)if(a[o].show&&(e[o]||a[o].pin)){var s=t(o,e),u=a[o].text.replace(/(__DT__)/g,s),d="ezmu__info-list-item "+o,m=n(d=a[o].featured?d+" is-featured":d,"li",u);r.appendChild(m),l++}l&&i.appendChild(r);return i}(this.options);i.appendChild(z);var y=i.querySelectorAll(".ezmu__info-section");this.infoSection=y?y[0]:null}},this.attachEventListener=function(){if(this.layoutIsReady()){var e=this;this.attachFileChangeListener(),this.attachDragNDropListener(),this.container[0].addEventListener("click",function(t){t.target&&(p(t.target,"ezmu__front-item__close-btn")&&e.removeFile(t),p(t.target,"ezmu__front-item__sort-button")?e.changeOrder(t.target):p(t.target,"ezmu__front-item__sort-button-skin")&&e.changeOrder(t.target.parentElement))})}},this.attachFileChangeListener=function(){if(!this.container)return null;var e=this.container[0].querySelectorAll("#"+this.fileInputID),t=e?e[0]:null;if(t){var i=this;t.addEventListener("change",function(e){i.isClean=!1;var t=e.target.files;t.length&&i.renderFiles(t)})}},this.attachDragNDropListener=function(){if(!this.container)return null;var e=this,t=this.container[0],i=function(t){e.draggingCounter<1&&e.draggingCounter++,e.draggingCounter>0&&d(e.container,"highlight")},n=function(t){e.draggingCounter>0&&e.draggingCounter--,e.draggingCounter<1&&m(e.container,"highlight")};h(["dragenter","dragleave","dragover","drop"],function(e){t.addEventListener(e,u,!1)}),h(["dragenter","dragover"],function(n){document.addEventListener(n,function(){d(e.container,"drag-enter")},!1),t.addEventListener(n,i,!1)}),h(["dragleave","drop"],function(i){document.addEventListener(i,function(){m(e.container,"drag-enter")},!1),t.addEventListener(i,n,!1)}),t.addEventListener("drop",function(t){var i=t.dataTransfer.files;e.renderFiles(i)},!1)},this.updateLayout=function(e){if(this.layoutIsReady()){var t=this.mediaPickerSection,i=this.previewSection,n=this.loadingSection;switch(e){case"preview":m(n,"ezmu--show"),m(t,"ezmu--show"),d(i,"ezmu--show");break;case"loading":m(t,"ezmu--show"),d(n,"ezmu--show");break;default:m(n,"ezmu--show"),m(i,"ezmu--show"),d(t,"ezmu--show")}}},this.removeFile=function(e){if(!this.container)return null;this.updateLayout("loading");var t=e.target.parentElement.parentElement.parentElement.parentElement.getAttribute("data-id"),i=o(this.filesMeta,"id",t);if(null!==i){var n=this.filesMeta[i],a=null;if("name"in n){var r=n.name;a=o(this.files,"name",r)}this.filesMeta.splice(i,1),null!==a?(this.files.splice(a,1),this.updatePreview()):this.updatePreview()}else this.updatePreview()},this.changeOrder=function(e){if(!this.container)return null;var t=this.filesMeta.length;if(!(t<2)){var i=e,n=e.parentElement.parentElement.parentElement,a=n.parentElement.getAttribute("data-id");if(a||(a=n.getAttribute("data-id")),a){var r,l=o(this.filesMeta,"id",a);if(!(p(i,"ezmu--sort-up")&&(r=l+1)>t-1||p(i,"ezmu--sort-down")&&(r=l-1)<0)){var s=this.filesMeta[l];e=this.filesMeta[r];this.filesMeta[l]=e,this.filesMeta[r]=s,this.updatePreview()}}}},this.renderFiles=function(t){if(!this.container)return null;var i=this;if(!this.options.allowMultiple&&this.filesMeta.length>0&&(this.filesMeta=[],this.files=[]),t.length){this.isClean=!1,this.updateLayout("loading");for(var n=[],o=0;o<t.length;o++){var s=t[o],u=a(s,i.options.allowedFileFormats),d=r(this.filesMeta,s);u&&d&&n.push(s)}if(n.length){var m=this.filesMeta.length,p=n.length,c=0;h(n,function(e,t){var n=new FileReader;n.onloadend=function(){var a={id:m+t,file:e,blob:n.result,name:e.name,type:e.type,url:null,oldFile:!1,fileSize:e.size,fileSizeInText:l(e.size)};e.type.match(/image\//g)&&(a.blob=n.result);var r=i.options.maxFileSize,o=!1;r&&(o=e.size/1024>r);a.limitExceeded=o,i.filesMeta.push(a),i.files.push(e),p===++c&&setTimeout(function(){i.updatePreview()},200)},n.readAsDataURL(e)}),e(this.uploadButtonContainer,this),this.attachFileChangeListener()}else i.updatePreview()}else this.updateLayout("default")},this.updatePreview=function(){if(this.layoutIsReady()){var e=this,t=this.filesMeta;if(!t.length)return this.updateLayout("default"),void this.validateFiles();if(!this.options.allowMultiple&&this.filesMeta.length)label_txt=this.options.dictionary.label.change,this.container[0].querySelectorAll(".ezmu__update-file-btn")[0].innerHTML=label_txt;var i=this.thumbnailArea;i.innerHTML="";var a=function(){var e=document.createElement("div");return d(e,"ezmu__thumbnail-list"),e}();h(t,function(t,i){var r=function(e,t){var i=e&&"id"in e?e.id:"",a="ezmu__thumbnail-list-item";"avater"===t.options.uploaderType&&(a+=" ezmu__thumbnail_avater");var r=n(a);r.setAttribute("data-id",i);var l=function(e,t){var i=document.createElement("div");if(d(i,"ezmu__thumbnail-list-item_front"),t.options.featured&&0===t.index){var a=t.options.dictionary.label.featured,r=n("ezmu__featured_tag","span",a);i.appendChild(r)}var l=function(){var e=document.createElement("div");d(e,"ezmu__thumbnail-front-item ezmu__front-item__close");var t=n("ezmu__front-item__close-icon","span"),i=document.createElement("span");return d(i,"ezmu__front-item__close-btn"),t.appendChild(i),e.appendChild(t),e}();if(t.options.showFileSize&&e&&"fileSizeInText"in e){var o=function(e){var t=n("ezmu__thumbnail-front-item ezmu__front-item__thumbnail-size"),i=n("ezmu__front-item__thumbnail-size-text"+(!("object"==typeof e&&"limitExceeded"in e&&e.limitExceeded)?"":" has-error"),"span");if(null==e)return t.appendChild(i),t;return i.innerHTML="fileSizeInText"in e?e.fileSizeInText:"",t.appendChild(i),t}(e);i.appendChild(o)}if(t.options.allowSorting){var s=function(){var e=document.createElement("div");d(e,"ezmu__thumbnail-front-item ezmu__front-item__sort-buttons");var t=document.createElement("button");d(t,"ezmu__front-item__sort-button ezmu--sort-down"),t.setAttribute("type","button"),t.innerHTML='<span class="ezmu__front-item__sort-button-skin ezmu--sort-down"></span>';var i=document.createElement("button");return d(i,"ezmu__front-item__sort-button ezmu--sort-up"),i.setAttribute("type","button"),i.innerHTML='<span class="ezmu__front-item__sort-button-skin ezmu--sort-up"></span>',e.appendChild(t),e.appendChild(i),e}();i.appendChild(s)}return i.appendChild(l),i}(e,t),o=function(e){var t=n("ezmu__thumbnail-list-item_back"),i=function(e){var t=n("ezmu__thumbnail-img","img"),i=n("ezmu__thumbnail-img-bg","span");if("object"!=typeof e)return i;var a="type"in e?e.type:"file",r="url"in e?e.url:null,l="blob"in e?e.blob:null;if(a.match(/image/g)){var o=r||o;return o=l||o,t.src=o,t.alt="image",t}return i}(e);return t.appendChild(i),t}(e);return r.appendChild(l),r.appendChild(o),r}(t,{index:i,options:e.options});a.appendChild(r)}),i.appendChild(a),this.updateLayout("preview"),this.validateFiles()}},this.layoutIsReady=function(){for(var e=!0,t=["container","mediaPickerSection","previewSection","thumbnailArea","loadingSection"],i=0;i<t.length;i++){if(!this[t[i]]){e=!1;break}}return e}}}();