/**
 * Plasma Slider
 * Company: Aazz Tech
 * Develoepr: Syed Galib Ahmed
 * Version: 1.0
 * Initial Release: 1 February, 2020
 * */

(function(){function t(t){var a=o("plasmaSlider__contents"),n=o("plasmaSlider__contentsWrap");if(Array.isArray(t.options.images)&&t.options.images.length){var e=100*t.options.images.length,r="width: "+e+"%;",s=r;n.setAttribute("style",s);var l=t.options.images;p(l,function(a,e){var r=0===e,s=i({src:"src"in a?a.src:"",alt:"alt"in a?a.alt:"",active:r},t);n.appendChild(s)})}return a.appendChild(n),a}function i(t,i){var a={src:"",alt:"",active:!1};a=r(a,t);var n=a.active?" active":"",e=o("plasmaSlider__sliderItem"+n),s=i.options.backgroundSize,l=o("plasmaSlider__bg"),c=i.options.backgroundColor;if(l.setAttribute("style","background-color: "+c+";"),"contain"===i.options.backgroundSize&&i.options.blurBackground){var h=o("plasmaSlider__bgImgBlur","img");h.src=a.src,l.appendChild(h)}var u=o("plasmaSlider__bgImg plasmaSlider__"+s,"img");return u.src=a.src,u.alt=a.alt,l.appendChild(u),e.appendChild(l),e}function a(t){var i=o("plasmaSlider__footer");if(!Array.isArray(t.options.images))return i;var a=o("plasmaSlider__thumbnailList");if(t.options.thumbnailBackgroundColor.length){var n="background-color: "+t.options.thumbnailBackgroundColor;a.setAttribute("style",n)}return p(t.options.images,function(t,i){var n="plasmaSlider__thumbnailListItem",e=0===i?n+" active":n,r=e,s=o(r),l=o("plasmaSlider__thumbnailListItemImg","img");l.src="src"in t?t.src:"",l.alt="alt"in t?t.alt:"Thumbnail Image",s.appendChild(l),a.appendChild(s)}),i.appendChild(a),i}function n(){var t=o("plasmaSlider__controlRight"),i=o("plasmaSlider__arrowBtn arrowBtn--right","button",'<span class="plasmaSliderIcon psi-angle-right"></span><span class="plasmaSliderSkin"></span>');return i.setAttribute("type","button"),i.setAttribute("data-direction","right"),t.appendChild(i),t}function e(){var t=o("plasmaSlider__controlLeft"),i=o("plasmaSlider__arrowBtn arrowBtn--left","button",'<span class="plasmaSliderIcon psi-angle-left"></span><span class="plasmaSliderSkin"></span>');return i.setAttribute("type","button"),i.setAttribute("data-direction","left"),t.appendChild(i),t}function r(t,i){if(!i)return t;if(i&&"object"!=typeof i)return defaults;var a;for(a in i)t.hasOwnProperty(a)&&(t[a]=i[a]);return t}function s(t){var i=!1;if("string"==typeof t){var a=t.match(/[^\d]/),n=a?null:parseInt(t);i=!!(n&&n>0),t=i?n:t}return"number"==typeof t&&(t=!(t<1)&&t,i=!!t),!!i&&t}function l(t){var i=null;if(t)switch(t){case"0":case"false":i=!1;break;case"1":case"true":i=!0}return i}function o(t,i,a){t=void 0===t?"":t,i=void 0===i?"div":i,a=void 0===a?"":a;var n=document.createElement(i);return c(n,t),n.innerHTML=a,n}function c(t,i){if("object"==typeof t&&"className"in t){var a=t.className.split(" ");-1==a.indexOf(i)&&(t.className+=" "+i,t.className=t.className.trim())}}function h(t,i){if(t){var a=new RegExp(i,"g");t.className=t.className.replace(a,""),t.className=t.className.trim()}}function u(t,i){if(t){var a=new RegExp(i,"g"),n=t.className.match(a);return n}}function d(t){if(!t)return null;if(!("parentElement"in t&&t.parentElement))return null;var i=t.parentElement.children,a=[].slice.call(i).indexOf(t);return a}function p(t,i){for(var a=0;a<t.length;a++)i(t[a],a)}this.PlasmaSlider=function(i){this.options={containerID:null,width:16,height:9,images:[],backgroundSize:"cover",blurBackground:!0,backgroundColor:"gainsboro",thumbnailBackgroundColor:"#fff",showThumbnails:!0,rtl:!1},this.container=null,this.extendDefaults=function(){this.options=r(this.options,i)},this.init=function(){this.extendDefaults();var t=this.options.containerID,i=document.getElementById(t);i&&(this.container=i,u(this.container,"is-initialized")||(c(this.container,"is-initialized"),this.getMarkupOptions(),this.prepareDOM(),this.attachEvents()))},this.getMarkupOptions=function(){if(this.container){var t=this.container.getAttribute("data-width");t&&s(t)&&(this.options.width=s(t));var i=this.container.getAttribute("data-height");i&&s(i)&&(this.options.height=s(i));var a=this.container.getAttribute("data-show-thumbnails");a&&null!==l(a)&&(this.options.showThumbnails=l(a));var n=this.container.getAttribute("data-rtl");n&&null!==l(n)&&(this.options.rtl=l(n));var e=this.container.getAttribute("data-background-size");e&&(this.options.backgroundSize=e);var r=this.container.getAttribute("data-blur-background");r&&null!==l(r)&&(this.options.blurBackground=l(r));var o=this.container.getAttribute("data-background-color");o&&(this.options.backgroundColor=o);var c=this.container.getAttribute("data-thumbnail-background-color");c&&(this.options.thumbnailBackgroundColor=c);var h=this.container.querySelectorAll(".plasmaSliderImageItem");if(h&&h.length){var u=[];p(h,function(t){var i=t.getAttribute("data-src"),a=t.getAttribute("data-alt"),n={};i&&(n.src=i||"",n.alt=a||"",u.push(n))}),u.length&&(this.options.images=u)}}},this.prepareDOM=function(){if(this.container){this.container.innerHTML="",c(this.container,"plasmaSlider");var i=o("plasmaSlider__body"),r=this.options.width,s=this.options.height,l=s/r*100;if(i.setAttribute("style","padding-top: "+l+"%"),this.options.images.length>1){var h=n();i.appendChild(h);var u=e();i.appendChild(u)}var d=t(this);if(i.appendChild(d),this.container.appendChild(i),this.options.showThumbnails&&this.options.images.length>1){var p=a(this);this.container.appendChild(p)}}},this.attachEvents=function(){if(this.container){var t=this,i=this.container.querySelectorAll(".plasmaSlider__arrowBtn");if(i&&i.length&&p(i,function(i){i.addEventListener("click",function(i){var a=i.target.className,n="plasmaSliderSkin"===a?i.target.parentElement:i.target;t.handleArrowEvent(n)})}),this.options.showThumbnails){var a=this.container.querySelectorAll(".plasmaSlider__thumbnailListItem");a&&a.length&&p(a,function(i){i.addEventListener("click",function(i){t.handleThumbnailEvent(i.target.parentElement)})})}}},this.handleArrowEvent=function(t){var i=this,a=t,n=a.getAttribute("data-direction"),e=i.container.querySelectorAll(".plasmaSlider__contentsWrap .plasmaSlider__sliderItem.active"),r=d(e[0]);if(!(null===r||r<0)){var s="right"===n?r+1:r-1;this.options.rtl&&(s="right"===n?r-1:r+1),this.changeSlideTo(s)}},this.handleThumbnailEvent=function(t){var i=d(t);this.changeSlideTo(i)},this.changeSlideTo=function(t){var i=this.options.images.length-1;t=t<0?i:t,t=t>i?0:t;var a="width: "+100*(i+1)+"%;",n=0===t?"left: ":"left: -";this.options.rtl&&(n=0===t?"right: ":"right: -");var e=a+n+100*t+"%;",r=this.container.querySelectorAll(".plasmaSlider__contentsWrap");r[0].setAttribute("style",e);var s=this.container.querySelectorAll(".plasmaSlider__contentsWrap .plasmaSlider__sliderItem.active");h(s[0],"active");var l=r[0].children.item(t);c(l,"active"),this.updateNavigation(t)},this.updateNavigation=function(t){if(this.options.showThumbnails){var i=this.container.querySelectorAll(".plasmaSlider__thumbnailList .plasmaSlider__thumbnailListItem");if(i&&i.length){p(i,function(i,a){h(i,"active"),a===t&&c(i,"active")});var a=i[0].parentElement,n=a.clientWidth,e=a.scrollLeftMax,r=i[t].offsetLeft,s=i[t].offsetWidth,l=r,o=l+s;l=l>e?e:l,l=l<0?0:l;var u=a.scrollLeft,d=u+n;(l<u||o>d)&&(a.scrollLeft=l)}}}}})();